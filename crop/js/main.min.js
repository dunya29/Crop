window.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".size--w input"),t=document.querySelector(".size--h input");let o=e.getAttribute("data-value"),a=t.getAttribute("data-value");const n=document.querySelector("#good-price").value,r=document.querySelector("#good-area"),u=document.querySelector("#good-total"),i=document.querySelector("#good-price-text"),d=document.querySelector("#good-area-text"),l=document.querySelector("#good-total-text");function c(){i.textContent=String(n).replace(/\B(?=(\d{3})+(?!\d))/g," ").trim();let o=e.value*t.value/1e4;r.value=o.toFixed(3),d.textContent=o.toFixed(2);let a=o<1?1*n:Math.round(o*n);u.value=a,l.textContent=String(a).replace(/\B(?=(\d{3})+(?!\d))/g," ").trim()}document.querySelectorAll(".size input").forEach((e=>{e.value=parseFloat(Number(e.getAttribute("data-value"))).toFixed(1)})),c();const h=document.querySelector("#image"),p=document.getElementById("button"),m=document.getElementById("result"),g=new Cropper(h,{viewMode:2,ovable:!1,oomable:!1,rotatable:!1,autoCropArea:1,dragMode:"none",ready:function(e){g.zoomTo(1)},crop:function(e){let t=Math.ceil(g.cropBoxData.width)/g.containerData.width*100,n=Math.ceil(g.cropBoxData.height)/g.containerData.height*100;document.querySelector(".size--w input").value=parseFloat(Math.round(o*t/100)).toFixed(1),document.querySelector(".size--h input").value=parseFloat(Math.round(a*n/100)).toFixed(1),c()},zoom:function(e){1===e.detail.oldRatio&&e.preventDefault()}});document.querySelectorAll(".size input").forEach((e=>{e.addEventListener("change",(()=>{let t=e.value.indexOf(".")>0?Number(String(Math.round(e.value)).substring(0,e.value.indexOf("."))):Math.round(e.value);e.value=t>e.max?parseFloat(e.max).toFixed(1):parseFloat(t).toFixed(1);let n=parseInt(document.querySelector(".size--w input").value),r=parseInt(document.querySelector(".size--h input").value),u=n/o*100,i=r/a*100,d={left:(g.containerData.width-g.containerData.width*u/100)/2,top:(g.containerData.height-g.containerData.height*i/100)/2,width:g.containerData.width*u/100,height:g.containerData.height*i/100};g.setCropBoxData(d)}))})),p.onclick=function(){m.innerHTML="",m.appendChild(g.getCroppedCanvas())}}));